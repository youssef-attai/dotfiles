#!/bin/bash

# This script is used to notify the user about the battery status
# It is basically a loop that checks the battery status every 1 minute
# and notifies the user if the battery is below 20% or above 80%

while true
do
  battery_level=$(acpi -b | grep -P -o '[0-9]+(?=%)')
  ac_power=$(acpi -b | grep -c "Charging")
  if [ $battery_level -ge 80 ] && [ $ac_power -eq 1 ];
  then
    icon="$HOME/Pictures/svg/battery-full.svg"
    dunstify "Battery High ($battery_level%)" "Please Disconnect Charger" -i $icon -t 5000 -u critical
  elif [ $battery_level -le 20 ] && [ $ac_power -eq 0 ];
  then
    icon="$HOME/Pictures/svg/battery-low.svg"
    dunstify "Battery Low ($battery_level%)" "Please Connect Charger" -i $icon -t 5000 -u critical
  fi
  sleep 60
done
